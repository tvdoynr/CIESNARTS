{% extends 'instructor_base.html' %}

{% block content %}
    <div class="row">
        <div class="col-md-6">

          <h3>Active Courses</h3>
                  <ul>
                    {% for can_enroll_course in active_page_obj %}
                      <li>
                        <label>
                            {{ can_enroll_course }}
                            <input type="radio" name="can_enroll_course" value="{{ can_enroll_course.pk }}">
                        </label>
                      </li>
                      <br>
                    {% empty %}
                      <li>There is no course.</li>
                    {% endfor %}
                  </ul>

                  <button type="submit" id="can-enroll-button" name="piazza" class="btn btn-sm btn-primary" disabled>Grades</button>

              <script>
                    const can_enroll_radio = document.querySelectorAll('input[name="can_enroll_course"]');
                    const can_enroll_button = document.getElementById('can-enroll-button');

                    can_enroll_radio.forEach((radio) => {
                        radio.addEventListener('change', () => {
                            const anyRadioChecked = [...can_enroll_radio].some((radio) => radio.checked);
                            can_enroll_button.disabled = !anyRadioChecked;
                        });
                    });

                    can_enroll_button.addEventListener('click', () => {
                        const can_enroll_course = [...can_enroll_radio].find((radio) => radio.checked).value;

                        const can_enrollURL = `/instructor/section/${can_enroll_course}/grades/`;
                        window.location.href = can_enrollURL;
                    });
            </script>

            <br>
            <br>
            <nav aria-label="Page navigation">
              <ul class="pagination">
                {% if active_page_obj.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ active_page_obj.previous_page_number }}">Previous</a>
                  </li>
                {% endif %}
                {% for i in active_page_obj.paginator.page_range %}
                  <li class="page-item {% if active_page_obj.number == i %}active{% endif %}">
                    <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                  </li>
                {% endfor %}
                {% if active_page_obj.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ active_page_obj.next_page_number }}">Next</a>
                  </li>
                {% endif %}
              </ul>
            </nav>

        </div>

        <div class="col-md-6">
            <h3> Forum </h3>
            <ul>

                {% for enrolled_course in forum_page_obj %}
                    <li>
                        <label>
                            {{ enrolled_course }}
                            <input type="radio" name="enrolled_course" value="{{ enrolled_course.pk }}">
                        </label>
                      </li>
                    <br>
                {% empty %}
                    <li>There is no course.</li>
                {% endfor %}

                </ul>

                <button type="submit" id="enrolled-button" name="enroll" class="btn btn-sm btn-primary" disabled>Enroll</button>

                <script>
                    const enrolled_radio = document.querySelectorAll('input[name="enrolled_course"]');
                    const enrolled_button = document.getElementById('enrolled-button');

                    enrolled_radio.forEach((radio) => {
                        radio.addEventListener('change', () => {
                            const anyRadioChecked = [...enrolled_radio].some((radio) => radio.checked);
                            enrolled_button.disabled = !anyRadioChecked;
                        });
                    });

                    enrolled_button.addEventListener('click', () => {
                        const enrolled_course = [...enrolled_radio].find((radio) => radio.checked).value;

                        const enrolled_URL = `/student/course/${enrolled_course}/enroll/`;
                        window.location.href = enrolled_URL;
                    });
            </script>

            <br>
            <br>
            <nav aria-label="Page navigation">
              <ul class="pagination">
                {% if forum_page_obj.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ forum_page_obj.previous_page_number }}">Previous</a>
                  </li>
                {% endif %}
                {% for i in forum_page_obj.paginator.page_range %}
                  <li class="page-item {% if forum_page_obj.number == i %}active{% endif %}">
                    <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                  </li>
                {% endfor %}
                {% if forum_page_obj.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ forum_page_obj.next_page_number }}">Next</a>
                  </li>
                {% endif %}
              </ul>
            </nav>
        </div>
    </div>
{% endblock %}